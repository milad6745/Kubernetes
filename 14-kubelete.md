Kubelet 
یکی از اجزای کلان Kubernetes است و مسئول اجرای کانتینرها در نودهای کلاستر می‌باشد. Kubelet وظیفه اجرای کانتینرها را بر اساس دستوراتی که توسط مدیر کنترل (Control Manager) ارسال می‌شوند، بر عهده دارد. 

وظایف اصلی Kubelet عبارتند از:

**پذیرش دستورات اجرا:** Kubelet از Control Plane دستورات اجرای کانتینرها را دریافت می‌کند. این دستورات معمولاً توسط وسائلی مانند Deployment یا Pod ارسال می‌شوند.

**مانیتورینگ وضعیت پادها:** Kubelet مانیتورینگ وضعیت کانتینرها را در نود اجرا می‌کند و در صورت نیاز به Control Plane گزارش می‌دهد.

**مدیریت منابع:** Kubelet با مدیریت منابع (Resource Management) کانتینرها در نود مشغول است. این شامل مدیریت CPU و حافظه مصرفی توسط کانتینرها می‌شود.

**Network Configuration:** Kubelet نقشی در تنظیمات شبکه برای کانتینرها ایفا می‌کند.

**اجرای Probe‌ها:** Kubelet مسئول اجرای Probe‌ها (مثل Liveness Probe یا Readiness Probe) در کانتینرها است.

**مدیریت Logging و Event:** Kubelet وظیفه مدیریت لاگ‌ها و رخدادهای مربوط به اجرای کانتینرها را دارد.

**تعامل با Container Runtime:** Kubelet با رابط Container Runtime (مثل Docker یا containerd) برای اجرای و مدیریت کانتینرها تعامل دارد.

به طور کلی، Kubelet مسئول اجرای کانتینرها در نودها است و در تنظیمات و مانیتورینگ کانتینرها نقش اساسی دارد.

# وظیفه اصلی 
![image](https://github.com/milad6745/Kubernetes/assets/113288076/17eb9344-1f31-48ab-b32b-01d3eb9679fa)

![image](https://github.com/milad6745/Kubernetes/assets/113288076/26e10756-ab17-434f-b180-0f052fb5244c)

# وقتی تغییری در تعداد replica میدهیم چه کامپوننت هایی درگیر میشوند .

وقتی تغییری در تعداد ReplicaSet یا هر منبع دیگری که مستقیماً به کانتینرها مرتبط است (مانند Podها که توسط ReplicaSet مدیریت می‌شوند)، در CoreDNS ایجاد می‌شود، چندین کامپوننت از معماری Kubernetes درگیر خواهند شد. این فرآیند به شکل زیر است:

**کاربر یا مدیر:** ابتدا، کاربر یا مدیر تصمیم می‌گیرد که تغییراتی در ReplicaSet اعمال کند. این ممکن است از طریق ابزارهای مدیریتی مانند `kubectl` یا از طریق تعریف یک فایل YAML برای اعمال تغییرات باشد.

**Kubectl یا API Server:** اطلاعات تغییرات توسط `kubectl` یا API Server (بخشی از Control Plane) دریافت و ارسال می‌شود. این اطلاعات شامل تغییرات در تعداد ReplicaSet یا مشخصات Podها می‌شود.

**Replication Controller Manager:** اگر تغییرات مربوط به ReplicaSet باشند، Replication Controller Manager (یکی از اجزای Control Plane) وظیفه مدیریت ReplicaSetها و تعداد مورد نیاز از Podها را دارد. این مدیریت‌کننده مسئول تغییر تعداد مورد نیاز از ReplicaSet و به تبع آن تعداد Podها است.

**Scheduler:** اگر تعداد ReplicaSet افزایش یافته و نیاز به اجرای Podهای جدید باشد، Scheduler (بخش دیگری از Control Plane) وظیفه انتخاب نودهای مناسب برای اجرای این Podها را دارد.

**Kubelet:** Kubelet در هر نودی که انتخاب شده‌اند، مسئول اجرای و مدیریت Podها است. Kubelet دستورات اجرای جدید را از Scheduler دریافت کرده و با ایجاد و مدیریت Containerها (در اینجا ممکن است CoreDNS) بر روی نودها درگیر می‌شود.

**Container Runtime:** Container Runtime (مانند Docker) نقش اجرایی را برعهده دارد و Containerها را اجرا می‌کند. این فرآیند شامل اجرای یا تغییر تعداد ReplicaSet ممکن است تغییراتی را در Container Runtime ایجاد کند.

تغییرات در تعداد ReplicaSet معمولاً به تغییرات در تعداد Podها و در نتیجه تعداد Containerهای مربوطه (مانند CoreDNS) منجر می‌شود. هر یک از این مراحل باعث به‌روزرسانی و تغییر وضعیت CoreDNS و دیگر کانتینرها می‌شوند.
