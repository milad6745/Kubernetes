# Schduler

ุฏุฑ Kubernetesุ Scheduler (ุจุฑูุงููโุฑุฒ) ฺฉ ุงุฒ ุงุฌุฒุง ุงุตู Control Plane ุงุณุช. ูุธูู Scheduler ูุฏุฑุช ูุฑุขูุฏ ุชุฎุตุต (Scheduling) ูพุงุฏูุง ุจู ููุฏูุง ุฏุฑ ฺฉูุงุณุชุฑ ุฑุง ุจุฑ ุนูุฏู ุฏุงุฑุฏ. ุนูุตุฑ Scheduler ุจู ุตูุฑุช ูุฏุงูู ฺฉููโ ูพุงุฏูุง ุฏุฑุฎูุงุณุช ฺฉู ุจุงุฏ ุฏุฑ ฺฉูุงุณุชุฑ ุงุฌุฑุง ุดููุฏ ุฑุง ุจุฑุฑุณ ฺฉุฑุฏู ู ุขูโูุง ุฑุง ุจู ฺฉ ููุฏ ููุงุณุจ ุชุฎุตุต ูโุฏูุฏ.

ูุธูู ุงุตู Scheduler ุนุจุงุฑุชูุฏ ุงุฒ:

**ุชุฎุตุต ูพุงุฏูุง ุจู ููุฏูุง:** Scheduler ุจุฑ ุงุณุงุณ ููุงูู ู ุงุณุชุฑุงุชฺโูุง ุชุฎุตุต ุชุนู ุดุฏู ุชูุณุท ฺฉุงุฑุจุฑ ุง ูพุดโูุฑุถุ ุชุตูู ูโฺฏุฑุฏ ฺฉู ูุฑ ูพุงุฏ ุจู ฺฉุฏุงู ููุฏ ุงุฎุชุตุงุต ุงุจุฏ.

**ูุฏุฑุช ููุงุจุน:** Scheduler ููุดููุฏุงูู ุจุง ุงุณุชูุงุฏู ุงุฒ ุงุทูุงุนุงุช ููุงุจุน ูุฑ ููุฏ ู ูพุงุฏูุงุ ุชุตููโฺฏุฑ ูโฺฉูุฏ ุชุง ุชุฑุงุฒ ุชูุฒุน ููุงุจุน ุฏุฑ ฺฉูุงุณุชุฑ ุจููู ุจุงุดุฏ.

**ุงุณุชุฑุงุชฺโูุง ุชุฎุตุต ูพุดุฑูุชู:** Scheduler ุงูฺฉุงูุงุช ุจุฑุง ุชุนู ุงูููุชโูุงุ ุชุญูู ุฎุทุงุ ู ุณุงุฑ ุงุณุชุฑุงุชฺโูุง ูพุดุฑูุชู ุฑุง ูุฑุงูู ฺฉุฑุฏู ุงุณุช.

**ูุฏุฑุช ูุถุนุช ูพุงุฏูุง:** Scheduler ูุถุนุช ูพุงุฏูุง ุฑุง ูพฺฏุฑ ฺฉุฑุฏู ู ุฏุฑ ุตูุฑุช ูุงุฒ ุจู ุชุบุฑ ุชุฎุตุต ููุงุจุน ุง ุฑุงูโุงูุฏุงุฒ ูุฌุฏุฏ ูพุงุฏูุง ุชุตูู ูโฺฏุฑุฏ.

**ูุงุจูุช ฺฏุณุชุฑุด:** Scheduler ุจู ุตูุฑุช ุงูุฒูููโูพุฐุฑ ุงุณุชุ ุจู ุงู ูุนูุง ฺฉู ูโุชูุงูุฏ ุงุณุชุฑุงุชฺโูุง ุฎุงุต ุฎูุฏ ุฑุง ุจุฑุง ุชุฎุตุต ูพุงุฏูุง ุจู ููุฏูุง ุงุถุงูู ฺฉูุฏ.

ุจู ุทูุฑ ฺฉูุ Scheduler ุจู ฺฉูุชุฑู ฺฉุงุฑุจุฑ ุชุฎุตุต ููุงุจุน ู ูุฏุฑุช ุจุงุฑ ฺฉูุงุณุชุฑ ฺฉูฺฉ ูโฺฉูุฏ ู ุงุฒ ุชูุฒุน ููุซุฑ ูพุงุฏูุง ุจู ููุฏูุง ุงุทููุงู ุญุงุตู ูโฺฉูุฏ.

# ููุงุฑุฏ ฺฉู ุฏุฑ ุชุฎุตุต ูพุงุฑ ุจู ููุฏ ูุง ููุฑุฏ ุจุฑุฑุณ ูุฑุงุฑ ูฺฏุฑูุฏ ุนุจุงุฑุชูุฏ ุงุฒ : 
![image](https://github.com/milad6745/Kubernetes/assets/113288076/cad5a273-81de-4177-a29f-3d6834c7dde3)

ุญุงูุง ุงฺฏุฑ schduer ุงูุงูู ุฑุง ุงุฒ ฺฉุงุฑ ุจุงูุฏุงุฒู ู ฺฉ ูพุงุฏ ุฑุง delete ฺฉูู ูุจูู ฺฉู ูพุงุฏ ุฌุฏุฏ ุจุงูุง ูุงุฏ ุงูุง ุฏุฑ ูุฑุญูู pending ุจุงู ููุงูุฏ
```bash
coredns-565d847f94-4rn6n                              0/1     Pending   0              11s
coredns-565d847f94-j624g                              1/1     Running   0              125m
coredns-565d847f94-nm58l                              1/1     Running   0              2d1h
coredns-565d847f94-xrp5n                              1/1     Running   0              130m
```
ุจุฑุง ุงู ููุธูุฑ ุงุณุช ฺฉู schduler ููุช ุงุฒ ฺฉุงุฑ ูุงูุชุฏ ูพุงุฏ ุจู ููุฏ ุชุฎุตุต ุฏุงุฏู ููุดูุฏ .


## ูFiltering And Scoring

ููุชุฑูฺฏ (Filtering) ู ุงุณฺฉูุฑูฺฏ (Scoring) ุฏุฑ ฺฉูุจุฑูุชุฒ ุจุฎุด ุงุฒ ูุฑุงูุฏ ุฒูุงูโุจูุฏ (Scheduling) ูุณุชูุฏ ฺฉู ุจู ููุธูุฑ ุงูุชุฎุงุจ ุจูุชุฑู ููุฏ (Node) ุจุฑุง ุงุฌุฑุง ูพุงุฏูุง (Pods) ุงุณุชูุงุฏู ูโุดููุฏ. ุงู ุฏู ูุฑุญูู ุจู ุชุฑุชุจ ุงูุฌุงู ูโุดููุฏ ุชุง ฺฉ ููุฏ ููุงุณุจ ุจุฑุง ุงุฌุฑุง ฺฉ ูพุงุฏ ูพุฏุง ุดูุฏ. ุฏุฑ ุงุฏุงูู ุงู ูุฑุงุญู ุฑุง ุจู ุชูุตู ุดุฑุญ ูโุฏูู:

### 1. **ููุชุฑูฺฏ (Filtering):**

ุฏุฑ ุงู ูุฑุญููุ ฺฉูุจุฑูุชุฒ ูุณุช ุชูุงู ููุฏูุง ููุฌูุฏ ุฑุง ุจุฑุฑุณ ฺฉุฑุฏู ู ุชููุง ุขูโูุง ฺฉู ุญุฏุงูู ุงูุฒุงูุงุช ูพุงุฏ ุฑุง ุจุฑุขูุฑุฏู ูโฺฉููุฏุ ุงูุชุฎุงุจ ูโฺฉูุฏ. ููุฏูุง ฺฉู ูุนุงุฑูุง ูุงุฒู ุฑุง ูุฏุงุฑูุฏุ ุงุฒ ูุณุช ุญุฐู ูโุดููุฏ.


ุงู ูุฑุญูู ููุฌุฑ ุจู ุญุฐู ููุฏูุง ูโุดูุฏ ฺฉู ุชูุงูุง ุง ุตูุงุญุช ูุฒุจุงู ูพุงุฏ ุฑุง ูุฏุงุฑูุฏ. ุงฺฏุฑ ูพุณ ุงุฒ ููุชุฑูฺฏ ูฺ ููุฏ ุจุงู ููุงูุฏุ ูพุงุฏ ุฏุฑ ุตู ุงูุชุธุงุฑ ุจุงู ูโูุงูุฏ ุชุง ุฒูุงู ฺฉู ฺฉ ููุฏ ููุงุณุจ ุฏุฑ ุฏุณุชุฑุณ ูุฑุงุฑ ฺฏุฑุฏ.

### 2. **ุงุณฺฉูุฑูฺฏ (Scoring):**

ุฏุฑ ุงู ูุฑุญููุ ููุฏูุง ุจุงูโูุงูุฏู ุงุฒ ูุฑุงูุฏ ููุชุฑูฺฏุ ุงูุชุงุฒุฏู ูโุดููุฏ. ูุฏู ุงุฒ ุงู ูุฑุญููุ ุงูุชุฎุงุจ ุจูุชุฑู ููุฏ ุงุฒ ุจู ููุฏูุง ููฺฉู ุงุณุช.


ูุฑ ููุฏ ุจุฑ ุงุณุงุณ ูุฌููุนูโุง ุงุฒ ุงู ูุนุงุฑูุง ุงูุชุงุฒุฏู ูโุดูุฏ ู ููุฏ ฺฉู ุจุงูุงุชุฑู ุงูุชุงุฒ ุฑุง ฺฉุณุจ ฺฉูุฏุ ุจุฑุง ุงุฌุฑุง ูพุงุฏ ุงูุชุฎุงุจ ูโุดูุฏ.

### **ุณูุงุฑุดโุณุงุฒ ููุชุฑูฺฏ ู ุงุณฺฉูุฑูฺฏ:**
ุฏุฑ ฺฉูุจุฑูุชุฒุ ุดูุง ูโุชูุงูุฏ ุจุง ุงุณุชูุงุฏู ุงุฒ `Scheduler Policies` ุง ุงุณุชูุงุฏู ุงุฒ ฺฉ ุฒูุงูโุจูุฏ ุณูุงุฑุด (Custom Scheduler)ุ ููุงูู ููุชุฑูฺฏ ู ุงุณฺฉูุฑูฺฏ ุฑุง ุณูุงุฑุดโุณุงุฒ ฺฉูุฏ.

- **Scheduler Extender:** ุจุง ุงุณุชูุงุฏู ุงุฒ ุงูุฒูููโูุง ุฒูุงูโุจูุฏุ ูโุชูุงูุฏ ููุชุฑูุง ู ุงุณฺฉูุฑูุง ุฎูุฏ ุฑุง ุจู ูุฑุงูุฏ ุฒูุงูโุจูุฏ ุงุถุงูู ฺฉูุฏ.
- **Custom Scheduler:** ูโุชูุงูุฏ ุฒูุงูโุจูุฏ ุฎุงุต ุฎูุฏ ุฑุง ูพุงุฏูโุณุงุฒ ฺฉุฑุฏู ู ุขู ุฑุง ุฏุฑ ฺฉูุงุฑ ุฒูุงูโุจูุฏ ูพุดโูุฑุถ ฺฉูุจุฑูุชุฒ ุงุณุชูุงุฏู ฺฉูุฏ.





ุนุงูู! ฺูู ฺฉูุงุณุชุฑ Kubernetes ุดูุง ุขูุงุฏูโุณุช ู ุจุง `kubectl get node` ูุณุช Nodeูุง ุฑู ูู ุฏุงุฑุฏุ ุญุงูุง ูโุชููู ุจุฑู ุณุฑุงุบ ฺฉ ุงุฒ ูููโุชุฑู ููุงูู ุฏุฑ **Scheduling**: ุนู **Filtering ู Scoring**.

ุงู ุฏู ูุฑุญูู ุงุณุงุณ ฺฉุงุฑ **Kube-Scheduler** ูุณุชู ุจุฑุง ุงูฺฉู ุชุตูู ุจฺฏุฑู ฺฉุฏูู Pod ุฑู ฺฉุฏูู Node ุงุฌุฑุง ุจุดู.

---

## ๐ฏ ููููู Filtering ู Scoring ุฏุฑ Kube-Scheduler

ุฒูุงู ฺฉู ู Pod ูุฑุงุฑู ุงุฌุฑุง ุจุดูุ **Scheduler** ุฏู ูุฑุญูู ุงุตู ุฑู ุท ูโฺฉูู:

---

### ๐งช 1. **Filtering (ููุชุฑ ฺฉุฑุฏู)**

ุฏุฑ ุงู ูุฑุญููุ Scheduler ููุท Nodeูุง ุฑู ูฺฏู ูโุฏุงุฑู ฺฉู **ูุงุจูุช ูุฒุจุงู** Pod ุฑู ุฏุงุฑู. ููุงุฑุฏ ฺฉู ุจุฑุฑุณ ูโุดู:

โ ุขุง Node ูุถุง ฺฉุงู (CPU/Memory) ุฏุงุฑูุ  
โ ุขุง Node taint ุง ูุญุฏูุฏุช ุฏุงุฑู ฺฉู ุงู Pod ูุชููู ุฑูุด ุงุฌุฑุง ุจุดูุ  
โ ุขุง Node ุจุง requirementsูุง Pod (ูุซู Node Affinity ุง tolerations) ุณุงุฒฺฏุงุฑูุ  
โ ุขุง Node ุณุงูู ู ุขูุงุฏู (Ready) ูุณุชุ

๐ ุชู ุฎุฑูุฌ ุดูุงุ ูุฑ ณ Node ูุถุนุช `Ready` ุฏุงุฑูุ ูพุณ ูุนูุงู ููุดูู ุชู ูุฑุญูู Filtering ูโุชููู ุงูุชุฎุงุจ ุจุดู.

---

### โญ 2. **Scoring (ุงูุชุงุฒุฏู)**

ุญุงูุง ฺฉู ูุณุช ุงุฒ Nodeูุง ูุงุฌุฏ ุดุฑุงุท ุฏุงุฑูุ Scheduler ุจู ูุฑฺฉุฏูู **ุงูุชุงุฒ** ูโุฏู.

- ุงูุชุงุฒูุง ุจู **0 ุชุง 100** ูุณุชู (ุจุณุชู ุจู ุงูฺฏูุฑุชูโูุง).
- Node ฺฉู ุจุดุชุฑู ุงูุชุงุฒ ุฑู ุจฺฏุฑูุ ุจุฑูุฏู ูโุดู.

๐ก ูุนุงุฑูุง ุฑุงุฌ Scoring:

| ูุนุงุฑ | ุชูุถุญ |
|-------|-------|
| **Least Requested** | ููุฏ ฺฉู ููุงุจุน ฺฉูุชุฑ ูุตุฑู ฺฉุฑุฏู (Load ูพุงูโุชุฑ) |
| **Balanced Resource Allocation** | ููุฏ ฺฉู ุชุนุงุฏู ุฎูุจ ุจู CPU ู RAM ุฏุงุฑู |
| **Node Affinity** | ุจุฑ ุงุณุงุณ ุจุฑฺุณุจโูุง ฺฉู ุชู Spec. ฺฏูุช |
| **Image Locality** | ููุฏ ฺฉู ูุจูุงู ุงูู Image ุฑู ุฏุงุดุชู |

---

## ๐ง ฺุทูุฑ ุชุณุชุด ฺฉูู ุชู ฺฉูุงุณุชุฑ ุฎูุฏุชุ

### 1. ุจุฑฺุณุจโฺฏุฐุงุฑ ุฑู ููุฏูุง:
```bash
kubectl label nodes kind-worker disktype=ssd
kubectl label nodes kind-worker2 disktype=hdd
```

### 2. ุณุงุฎุช Pod ุจุง Node Affinity:
```yaml
# pod-affinity-example.yaml
apiVersion: v1
kind: Pod
metadata:
  name: affinity-pod
spec:
  affinity:
    nodeAffinity:
      requiredDuringSchedulingIgnoredDuringExecution:
        nodeSelectorTerms:
        - matchExpressions:
          - key: disktype
            operator: In
            values:
            - ssd
  containers:
  - name: nginx
    image: nginx
```

### ุงุฌุฑุง:
```bash
kubectl apply -f pod-affinity-example.yaml
```

โ ุญุงูุง ฺูู Pod ฺฏูุชู ููุท ุฑู Nodeูุง ุจุง `disktype=ssd` ุงุฌุฑุง ุจุดูุ **ููุท `kind-worker` ุฏุฑ ูุฑุญูู Filtering ูโูููู**ุ ู ฺูู ููุท ฺฉ Node ูููุฏูุ ุฑู ูููู ุงุฌุฑุง ูโุดู.

---

### ๐ ุจุฑุฑุณ ุงูฺฉู Pod ฺฉุฌุง ุงุฌุฑุง ุดุฏ:
```bash
kubectl get pod -o wide
```

---

## ๐ ููุงุจุน ุงุฎุชุงุฑ (ุงฺฏู ุจุฎูุง ุจุดุชุฑ ุงุฏ ุจฺฏุฑ):

- [Kubernetes Scheduler Configuration](https://kubernetes.io/docs/concepts/scheduling-eviction/scheduling-framework/)
- ูุดุงูุฏู ุฏููโุชุฑ ูุงฺฏ Scheduler:
  ```bash
  kubectl logs -n kube-system -l component=kube-scheduler
  ```

---
