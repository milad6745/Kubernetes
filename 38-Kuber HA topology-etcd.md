مستر نود سه تا میاریم بالا
شامل
etcd
schduler
control manager
api server
که api server در لحظه سه تاشون جواب میدهند که horizentaly scale میشود که api server بصورت ulti master است.
ماژول های schduler و control maanger یکیشون فقط جواب میدهند . که بصورت master slave است .
در etcd باید 3 تا باشد، اگر دو تا فیلد شود کلاستر میخوابد (داخلش کوآروم برقراره برای election)(الگوریتم Raft)
تنها چیزی که میتواند به etcd ارتباط داشته باشد api server است .
عدد 3 -5 -7 عدد مناسبی برای تعداد مستر است برایش هست .
حداقل سه تا worker
![image](https://github.com/user-attachments/assets/d85b0a0e-3dc3-48b8-b638-279eb8b2a02d)



کمترین مقدار متسر نود- 8 گیگ رم است .


در یک کلاستر Kubernetes، دو نوع گره (Node) وجود دارد که هرکدام نقش خاصی در عملکرد کلاستر ایفا می‌کنند: **Master Node** و **Worker Node**. در ادامه، به شرح وظایف هر یک می‌پردازیم:

---

### ۱. Master Node (گره اصلی)

**Master Node** 

مسئول مدیریت کل کلاستر و هماهنگی بین اجزای مختلف است. این گره وظایف کنترلی و مدیریتی را انجام می‌دهد.

#### وظایف اصلی Master Node:
1. **API Server**:

 واسط اصلی بین کاربران و کلاستر است.
 تمام دستورات (مانند `kubectl`) از طریق API Server پردازش می‌شوند.

2. **Scheduler**:
   
 مسئول برنامه‌ریزی (Scheduling) Podها روی Worker Nodeها است.
 تصمیم می‌گیرد که هر Pod در کدام Worker Node اجرا شود، با توجه به منابع در دسترس و نیازهای Pod.


3. **Controller Manager**:

 مجموعه‌ای از کنترلرها که وضعیت کلاستر را مدیریت می‌کنند.
 مثال‌ها: 
**Node Controller**:
     
     بررسی وضعیت گره‌ها.
**Replication Controller**:
     
     اطمینان از تعداد مشخصی از Podها.

4. **etcd**:
   - پایگاه داده توزیع‌شده برای ذخیره‌سازی داده‌های پیکربندی و وضعیت کلاستر.
   - اطلاعاتی مانند وضعیت Podها و Serviceها را ذخیره می‌کند.

5. **Cloud Controller Manager** (اختیاری):
   - تعامل با سرویس‌های ابری (مانند AWS، Azure، یا GCP).

---

### ۲. Worker Node (گره کاری)

**Worker Node** جایی است که بار کاری اصلی (Workload) کلاستر اجرا می‌شود. این گره شامل منابعی مانند CPU، حافظه و فضای ذخیره‌سازی است که برای اجرای Podها استفاده می‌شود.

#### اجزای اصلی Worker Node:
1. **Kubelet**:
   
   - مسئول اجرای Podها و کانتینرهای داخل آنها.
   - دستورات را از Master Node دریافت کرده و وضعیت Podها را گزارش می‌دهد.

3. **Kube Proxy**:
   
   - مسئول مدیریت شبکه و اطمینان از دسترسی به سرویس‌ها.
   - ترافیک بین Podها و خارج از کلاستر را هدایت می‌کند.

5. **Container Runtime**:
   
   - موتور اجرای کانتینرها (مانند Docker، containerd، یا CRI-O).
   - کانتینرهای Podها را اجرا و مدیریت می‌کند.

7. **Pods**:
   
   - کوچک‌ترین واحد اجرایی Kubernetes که روی Worker Node قرار می‌گیرد.
   - هر Pod شامل یک یا چند کانتینر است.

---

### ارتباط بین Master Node و Worker Node:


- **Master Node** وظایف مدیریتی را انجام می‌دهد و تصمیمات را می‌گیرد.
- **Worker Node** وظایف اجرایی را انجام داده و بار کاری را اجرا می‌کند.
- ارتباط بین آنها از طریق **API Server** و **Kubelet** برقرار می‌شود.

---

### تعداد Master Node و Worker Node:

- **Master Node**:
  - معمولاً برای افزایش پایداری، حداقل ۳ Master Node در یک کلاستر تولیدی استفاده می‌شود (برای High Availability).
  
- **Worker Node**:
  - تعداد آنها بستگی به نیاز کلاستر دارد. برای افزایش ظرفیت پردازش، می‌توانید تعداد Worker Nodeها را افزایش دهید.

---

### مثال ساده از ساختار کلاستر:

```
+------------------------+
|       Master Node      |
|                        |
|  - API Server          |
|  - Scheduler           |
|  - Controller Manager  |
|  - etcd                |
+------------------------+
           |
           |
   +----------------+
   | Worker Node 1  |
   | - Kubelet      |
   | - Kube Proxy   |
   | - Pods         |
   +----------------+
           |
   +----------------+
   | Worker Node 2  |
   | - Kubelet      |
   | - Kube Proxy   |
   | - Pods         |
   +----------------+
```

این معماری کمک می‌کند Kubernetes یک سیستم مقیاس‌پذیر و مقاوم باشد.

