ุญุชูุงู! ูุตุจ **ฺฉูุงุณุชุฑ Kubernetes ุจุง ุงุณุชูุงุฏู ุงุฒ Kubespray** ฺฉ ุงุฒ ุฑูุดโูุง ุฑุงุฌ ุจุฑุง ูพุงุฏูโุณุงุฒ Kubernetes ุจูโุตูุฑุช ูุงุจู ุชูุธู ู production-ready ุงุณุช. ุฏุฑ ุงุฏุงูู ุชูุถุญ ฺฉุงูู ูุฑุงุญู ูุตุจ ุขูุฑุฏู ุดุฏู:

---

### โ Kubespray ฺุณุชุ

Kubespray ฺฉ ูพุฑูฺู ุงูพูโุณูุฑุณ ูุจุชู ุจุฑ **Ansible** ุงุณุช ฺฉู ุจู ุดูุง ุงูฺฉุงู ูโุฏูุฏ ุชุง ฺฉูุงุณุชุฑ Kubernetes ุฑุง ุฑู ฺูุฏู ูุงุดู (physical ุง VM) ูุตุจ ู ูพฺฉุฑุจูุฏ ฺฉูุฏ. ูุฒุช ุงุตู ุขู **ูุงุจูุช ุชูุธู ุจุงูุง** ู **ุณุงุฒฺฏุงุฑ ุจุง ุชูุฒุนโูุง ูุฎุชูู ูููฺฉุณ** ุงุณุช.

---

### ๐ ูพุดโูุงุฒูุง

ูุจู ุงุฒ ุดุฑูุนุ ูุทูุฆู ุดูุฏ ููุงุฑุฏ ุฒุฑ ูุฑุงูู ุงุณุช:

1. **ูุงุดูโูุง (ุง VMูุง)**:

   * ุญุฏุงูู 2 ูุงุดู (1 ูุณุชุฑ ู 1 ููุฏ ฺฉุงุฑฺฏุฑ).
   * ุณุณุชูโุนุงูู: Ubuntu, CentOS, Debian ุง ูุฑ ุชูุฒุน ูพุดุชุจุงูโุดุฏู ุฏฺฏุฑ.
   * SSH ุฏุณุชุฑุณ ุจู ููุฏูุง.

2. **ูุตุจ ูพฺฉุฌโูุง ุฑู ุณุณุชู ฺฉูุชุฑูโฺฉููุฏู (ฺฉู Ansible ุงุฌุฑุง ูโุดูุฏ):**

   ```bash
   sudo apt update && sudo apt install -y python3-pip git sshpass
   pip3 install ansible
   ```

---

### ๐ฆ ูุฑุงุญู ูุตุจ Kubespray

#### 1. ฺฉููู ฺฉุฑุฏู ูุฎุฒู Kubespray:

```bash
git clone https://github.com/kubernetes-sigs/kubespray.git
cd kubespray
```

#### 2. ูุตุจ ูุงุจุณุชฺฏโูุง ููุฑุฏ ูุงุฒ:

```bash
sudo pip3 install -r requirements.txt
```

#### 3. ฺฉูพ ูุงู inventory ููููู ู ุณุงุฎุช inventory ุงุฎุชุตุงุต:

```bash
cp -rfp inventory/sample inventory/mycluster
```

#### 4. ุชุนุฑู ููุฏูุง ุฏุฑ ูุงู `inventory/mycluster/hosts.yaml`

ุณุงุฎุช ุงู ูุงู ุฑุง ูโุชูุงูุฏ ุจุง ุงุณฺฉุฑูพุช ุฒุฑ ุงูุฌุงู ุฏูุฏ (ูุฑุถ ฺฉูุฏ 3 ููุฏ ุฏุงุฑุฏ):

```bash
declare -a IPS=(192.168.1.10 192.168.1.11 192.168.1.12)

CONFIG_FILE=inventory/mycluster/hosts.yaml
python3 contrib/inventory_builder/inventory.py ${IPS[@]} > $CONFIG_FILE
```

ุณูพุณ ูุงู ุฑุง ูุฑุงุด ฺฉูุฏ ุชุง ูุดุฎุต ุดูุฏ ฺฉุฏุงู ููุฏ master ู ฺฉุฏุงู worker ุงุณุช.

#### 5. ุงุฌุฑุง ูุตุจ ุจุง Ansible:

```bash
ansible-playbook -i inventory/mycluster/hosts.yaml --become --become-user=root cluster.yml
```

---

### โ ูพุณ ุงุฒ ูุตุจ:

1. ูุงู kubeconfig ุฏุฑ `~/.kube/config` ุงุฌุงุฏ ูโุดูุฏ.
2. ุจุง ุงุณุชูุงุฏู ุงุฒ `kubectl` ูโุชูุงูุฏ ูุถุนุช ฺฉูุงุณุชุฑ ุฑุง ุจุฑุฑุณ ฺฉูุฏ:

   ```bash
   kubectl get nodes
   ```

---

### ๐ก ูฺฉุงุช ููู:

* ุงฺฏุฑ ูุงุฑูุงู ุฏุงุฑุฏุ ูพูุฑุชโูุง ุฑุง ุจุงุฒ ฺฉูุฏ (ูุงููุฏ 6443, 2379-2380 ู ...).
* ูโุชูุงูุฏ ุจุง ุชุบุฑ ูพุงุฑุงูุชุฑูุง ุฏุฑ `inventory/mycluster/group_vars` ฺฉูุงุณุชุฑ ุฑุง ุดุฎุตโุณุงุฒ ฺฉูุฏ (ุดุจฺฉูุ ูพูุงฺฏู CNIุ ูุณุฎู K8s ู...).
* Kubespray ูุงุจูุช ูุตุจ add-onูุง ูุซู Helm, MetalLB, ingress controller ู ... ุฑุง ุฏุงุฑุฏ.

---

ูพุฑุณุด ุนุงูู! ููุงุณู ุจู **Kubespray** ู **kubeadm** ุฎู ูููู ุจุฑุง ุงูุชุฎุงุจ ุฑูุด ูุตุจ ููุงุณุจ Kubernetes. ุฌูุงุจ ฺฉูุชุงู:

> โ **Kubespray ุฑุงุญุชโุชุฑ ูุณุชุ ูู ุฎูุฏฺฉุงุฑุชุฑ ู ูพุดุฑูุชูโุชุฑู** โ ููุงุณุจ ุจุฑุง ูุตุจ ุญุฑููโุงุ ุฏุฑ ููุงุณ ุจุฒุฑฺฏ ุง ุฏุฑ ูุญุท production.

---

### ๐ ููุงุณู Kubespray ู kubeadm:

| ูฺฺฏ                   | **kubeadm**                            | **Kubespray**                         |
| ----------------------- | -------------------------------------- | ------------------------------------- |
| ูุญูู ูุตุจ                | ุฏุณุช (ุฏุณุชูุฑ ุจู ุฏุณุชูุฑ)                  | ุฎูุฏฺฉุงุฑ ุจุง Ansible                     |
| ููุงุณุจ ุจุฑุง              | ูุญุท ุขุฒูุงุด ู ุงุฏฺฏุฑุ ูุตุจ ุณุงุฏู        | ูุญุท productionุ ฺูุฏ ููุฏุ ุณูุงุฑุดโุณุงุฒ |
| ูุฏุฑุช ููุฏูุง            | ุฏุณุช (ุฎูุฏุช ุจุงุฏ ููุฏ ุงุถุงูู/ุญุฐู ฺฉู)     | ุฎูุฏฺฉุงุฑ ุงุฒ ุทุฑู Ansible                |
| ูพฺฉุฑุจูุฏ ุดุจฺฉู           | ุจุงุฏ ุฎูุฏุช ูุตุจ ฺฉู (Flannel, Calico...) | ุงุชููุงุชฺฉ ูพฺฉุฑุจูุฏ ูโฺฉูู              |
| ูุงุฒ ุจู ุฏุงูุด ูููฺฉุณ     | ูุชูุณุท                                  | ูุชูุณุท ุจู ุจุงูุง (ูุฎุตูุตุงู Ansible)       |
| ูุงุจูุช ุณูุงุฑุดโุณุงุฒ      | ูุญุฏูุฏ                                  | ุฒุงุฏ (ุงุฒ ุทุฑู ูุงูโูุง YAML)          |
| ูุงุฒ ุจู ูุฑูโุงูุฒุงุฑ ุงุถุงู | ููุท kubeadm ู kubectl ู Docker         | Ansibleุ Pythonุ Kubespray            |

---

### โ ูพุณ ูุชุฌูโฺฏุฑ:

* ุงฺฏุฑ ุชุงุฒูโฺฉุงุฑ ุง ฺฉูุงุณุชุฑ ฺฉูฺฺฉ ุฏุงุฑ โ **kubeadm ุฑุงุญุชโุชุฑู** ฺูู ุจุง ฺูุฏ ุฏุณุชูุฑ ุณุงุฏู ุฑุงู ูโุงูุชู.
* ุงฺฏุฑ ูโุฎูุง **ฺฉูุงุณุชุฑ ูุงุจู ุงุทููุงูุ ฺูุฏ ููุฏุ ุจุง ฺฉูุชุฑู ฺฉุงูู ุฑู ุชูุธูุงุช** ุฏุงุดุชู ุจุงุด โ **Kubespray ุจูุชุฑู** ฺูู ูููโฺุฒู ุฎูุฏฺฉุงุฑ ู ุฏูู ุงูุฌุงู ูโุฏู.

---





