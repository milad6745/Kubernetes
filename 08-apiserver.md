# api server
ุชูุงู ฺฉุงููพูููุช ูุง ุจุฑุง ุงูฺฉู ุจุง ููุฏฺฏู ุตุญุจุช ฺฉููุฏ ูุจุงุณุช ุงุฒ ุทุฑู api server  ุจุง ูู ุตุญุจุช ฺฉููุฏ
ูุฑ ฺฉุณ ูุฎูุงูุฏ ุจุง etcd ุตุญุจุช ฺฉูุฏ ููุท ุงุฒ ุทุฑู api server ุจุงุฏ ุตุญุจุช ฺฉูุฏ.
ุชููุง  ฺฉุงููพูููุช ุงุณุช ฺฉู ูุชูุงูุฏ Horizentaly ุงุณฺฉู ุดูุฏ .
ุชููุง ฺฉุงููพูููุช ฺฉู ุชูุงู ุงุดูู ุจุง ูู ฺฉุงุฑ ูฺฉููุฏ api server ุงุณุช .

ุงููุงุน scaling
- scale up 
- scale out ุชุนุฏุงุฏ ุงูุฒุงุด ุงุจุฏ
- automatic saling ุจุตูุฑุช ุฎูุฏฺฉุงุฑ ุงูุฌุงู ูุดูุฏ


ุฏุฑ ุตูุฑุช ฺฉู api server ุฏุงู ุดูุฏ ฺฉูุงุณุชุฑ ูุฑุฒ ูุดูุฏ ู ุฏุฑ ุงุตุทูุงุญ ฺฉุงุฑ ูฺฉูุฏ ุงูุง ูฺ ฺูุฌ ููุชูุงู ุงูุฌุงู ุฏุงุฏ .

## API Server 
ุฏุฑ Kubernetes (ฺฉูุจุฑูุชุฒ) ฺฉ ุงุฒ ุงุฌุฒุง ุงุตู ุณุณุชู ุงุณุช ู ุจู ุนููุงู ุฏุฑูุงุฒู ูุงุณุท ุจู ฺฉูุงูุชโูุง ู ุณุงุฑ ุงุฌุฒุง ู ฺฉุงููพูููุชโูุง Kubernetes ุนูู ูโฺฉูุฏ. ุงู ฺฉุงููพูููุช ูุณุฆูู ูุฏุฑุช ู ุงุฌุฑุง ุนููุงุชโูุง API ุจุฑ ุฑู ฺฉููโ ููุงุจุน ฺฉูุงุณุชุฑ ูโุจุงุดุฏ.

- Resource Management
- CRUD Operations Support
- Access Control
- WebSocket Execution
- Events and Notifications

ูุธุงู ุงุตู API Server ุฏุฑ Kubernetes ุนุจุงุฑุชูุฏ ุงุฒ:

**ูุฏุฑุช ููุงุจุน:** API Server ูุณุฆูู ูุฏุฑุช ููุงุจุน ูุฎุชูู ุฏุฑ ฺฉูุงุณุชุฑ ุงุณุช. ุงู ููุงุจุน ุดุงูู ูพุงุฏ (Pods)ุ ุณุฑูุณโูุง (Services)ุ ุญุฌูโูุง ูฺฏูุฏุงุฑ ุฏุงุฏู (Persistent Volumes)ุ ูุชู ฺฉุงู (ConfigMaps)ุ ุณุฑูุฑูุง (Nodes) ู ุฏฺฏุฑ ููุงุจุน ูโุดููุฏ.

**ูพุดุชุจุงู ุงุฒ ุนููุงุช CRUD:** API Server ูพุดุชุจุงู ุงุฒ ุนููุงุช ุงุฌุงุฏ (Create)ุ ุฎูุงูุฏู (Read)ุ ุจูโุฑูุฒุฑุณุงู (Update) ู ุญุฐู (Delete) ุฑุง ุจุฑ ุฑู ููุงุจุน ูุฑุงูู ูโฺฉูุฏ. ุงู ุนููุงุชโูุง ุจู ุตูุฑุช ฺฉูพุงุฑฺู ุงุฒ ุทุฑู API ุงุฑุงุฆู ูโุดููุฏ.

**ุงุนูุงู ฺฉูุชุฑู ุฏุณุชุฑุณ:** API Server ุจู ฺฉูฺฉ ฺฉูุชุฑู ุฏุณุชุฑุณ (Access Control) ูุฏุฑุช ูโฺฉูุฏ ฺฉู ฺฉุฏุงู ฺฉุงุฑุจุฑุงู ู ฺฉุฏุงู ุณุฑูุณโูุง ูุฌูุฒูุง ุฏุณุชุฑุณ ุจู ููุงุจุน ุฑุง ุฏุงุฑูุฏ.

**ุงุฌุฑุง WebSockets:** API Server ุงู ุงูฺฉุงู ุฑุง ูุฑุงูู ูโฺฉูุฏ ฺฉู ุงุฒ ุทุฑู ุงุชุตุงูโูุง WebSockets ุจุง ฺฉูุงุณุชุฑ ุงุฑุชุจุงุท ุจุฑูุฑุงุฑ ุดูุฏ ู ุจู ุงุทูุงุนุงุช ุจูโุฑูุฒ ุดุฏู ฺฉูุงุณุชุฑ ูุธุงุฑุช ฺฉูุฏ.

**ุงุนูุงูโูุง ู ุฑูุฏุงุฏูุง:** API Server ุจู ฺฉูฺฉ ุณุณุชู ุฑูุฏุงุฏูุง (Events) ู ุงุนูุงูโูุง (Notifications) ุจู ฺฉูุงูุชโูุง ุงุทูุงุนุงุช ุงุฑุณุงู ูโฺฉูุฏ ุชุง ุชุบุฑุงุช ุฏุฑ ฺฉูุงุณุชุฑ ุฑุง ุฑุตุฏ ู ูพฺฏุฑ ฺฉููุฏ.

**ูุฏุฑุช ุชุฑุงฺฉูุดโูุง:** API Server ุงุทูุงุนุงุช ุชุฑุงฺฉูุดโูุง ูุฎุชูู ุฏุฑ ฺฉูุงุณุชุฑ ุฑุง ูุฏุฑุช ูโฺฉูุฏ ุชุง ุชุบุฑุงุช ุจูโุฑูุฒุฑุณุงูโุดุฏู ุจู ุตูุฑุช ุงูุชุฒุงุน ู ุชุถููโุดุฏู ุงูุฌุงู ุดููุฏ.

 ุจู ุนููุงู ฺฉ ุงุฒ ุงุฌุฒุง ุงุตู ฺฉูุจุฑูุชุฒ ููู ุงุณุช ู ุชูุงู ุงุฌุฒุง ุงุฒ ุทุฑู ุขู ุจุง ฺฉุฏฺฏุฑ ุงุฑุชุจุงุท ุจุฑูุฑุงุฑ ูโฺฉููุฏ


 ุณุคุงู ุฎู ุฎูุจ ูพุฑุณุฏ ๐
**Controller Manager** ุฏููุงู ูููู ุฌุงู ฺฉู Kubernetes ยซุฒูุฏูยป ูุดู.

---

## Controller Manager ฺูุ

**kube-controller-manager** ฺฉ ุงุฒ ุงุฌุฒุง ุงุตู **Control Plane** ูุณุช.

> ฺฉุงุฑุด ุงูู ฺฉู ุฏุงุฆู ฺฺฉ ฺฉูู:
> ยซูุถุนุช ูุงูุน ฺฉูุงุณุชุฑ ุจุง ูุถุนุช ูุทููุจ ฺฉู ุชู ฺฏูุช ฺฉ ูุณุช ุง ููุยป

ุงฺฏู ูุจุงุดู โ **ุงูุฏุงู ุงุตูุงุญ ุงูุฌุงู ูโุฏู** ๐ง

---

## ููููู ฺฉูุฏ: Desired State vs Current State

ุชู Kubernetes ุชู ูโฺฏ:

```yaml
replicas: 3
```

ูู ุงูุงู ููฺฉูู:

* ููุท 2 ุชุง Pod ุฏุฑ ุญุงู ุงุฌุฑุง ุจุงุดู ๐

๐ Controller Manager ูุงุฏ ูฺฏู:

> ุจุงุฏ 3 ุชุง ุจุงุดู โ ฺฉ ุฏฺฏู ุจุณุงุฒ

---

## Controller ุนู ฺุ

Controller ู **loop ุฏุงุฆูู**:

```
Watch โ Compare โ Act
```

1. ูุถุนุช ุฑู ุงุฒ API Server ูโุฎููู
2. ุจุง ูุถุนุช ูุทููุจ ููุงุณู ูโฺฉูู
3. ุงฺฏู ูุฑู ุฏุงุดุชุ ุงูุฏุงู ูโฺฉูู

---

## kube-controller-manager ุดุงูู ฺู Controllerูุง ูุณุชุ

### 1๏ธโฃ ReplicaSet Controller

* ุชุนุฏุงุฏ Podูุง ุฑู ุจุง replicas ุชูุธู ูโฺฉูู
* ุงฺฏู Pod ุจูุฑู โ ฺฉ ุฌุฏุฏ ูโุณุงุฒู

---

### 2๏ธโฃ Deployment Controller

* ูุฏุฑุช rollout ู rollback
* ุขูพุฏุช ูุณุฎู ุงูพูฺฉุดู ุจุฏูู downtime

---

### 3๏ธโฃ Node Controller

* ุจุฑุฑุณ ูุถุนุช ููุฏูุง
* ุงฺฏู Node down ุจุดู:

  * Podูุง ุฑู ุงุฒ ุงูู ููุฏ ุฎุงุฑุฌ ูโฺฉูู

---

### 4๏ธโฃ Job / CronJob Controller

* ุงุฌุฑุง Jobูุง
* ูุฏุฑุช retry ู ุฒูุงูโุจูุฏ CronJob

---

### 5๏ธโฃ Endpoint Controller

* ุณุงุฎุช Endpoint ุจุฑุง Serviceูุง

---

### 6๏ธโฃ Namespace Controller

* ููุช Namespace ุญุฐู ูุดู:

  * ููุงุจุน ุฏุงุฎูุด ุฑู ูู ูพุงฺฉ ูโฺฉูู

---

### 7๏ธโฃ Service Account Controller

* ุณุงุฎุช ServiceAccount ูพุดโูุฑุถ ุจุฑุง Namespaceูุง

---

## Controller Manager ฺุทูุฑ ฺฉุงุฑ ูโฺฉููุ

* ูุณุชูู ุจู ููุฏูุง ฺฉุงุฑ ูุฏุงุฑู
* ููุท ุจุง **API Server** ุญุฑู ูโุฒูู
* ูุถุนุช ุฑู ุงุฒ **etcd** ูโุฎููู (ุบุฑูุณุชูู)

```
Controller Manager
     โ
API Server
     โ
etcd
```

---

## ูุซุงู ุฎู ูุงูุน ๐ฏ

ุชู ููุดุช:

```yaml
replicas: 2
```

ูู:

* ฺฉ ุงุฒ Podูุง ฺฉุฑุด ูโฺฉูู

ฺ ูุดูุ

1. kubelet ฺฏุฒุงุฑุด ูโุฏู Pod ูุฑุฏู
2. API Server ูุถุนุช ุฑู ุขูพุฏุช ูโฺฉูู
3. Controller Manager ูโุจูู replicas=1 ุดุฏู
4. Pod ุฌุฏุฏ ุณุงุฎุชู ูโุดู โ

---

## ุชูุงูุช Controller Manager ุจุง Scheduler

| ฺฉุงููพูููุช           | ฺฉุงุฑ                          |
| ------------------ | ---------------------------- |
| Controller Manager | ุชุตูู ูโฺฏุฑู ยซฺ ุจุงุฏ ุจุงุดูยป |
| Scheduler          | ุชุตูู ูโฺฏุฑู ยซฺฉุฌุง ุงุฌุฑุง ุจุดูยป |

---

## High Availability

ุฏุฑ ฺฉูุงุณุชุฑูุง HA:

* ฺูุฏ Controller Manager ุฏุงุฑู
* ูู ููุท **ฺฉ ูุนุงู (Leader)** ูุณุช
* ุจูู Standby

---

## ุฎูุงุตู ุฎู ฺฉูุชุงู

ุงฺฏุฑ Kubernetes ุจุฏู ุจุงุดู:

* API Server = ูุบุฒ
* etcd = ุญุงูุธู
* Controller Manager = ุณุณุชู ุนุตุจ (ุชุตุญุญโฺฉููุฏู)
* Scheduler = ุจุฑูุงููโุฑุฒ
* kubelet = ุงุฌุฑุงฺฉููุฏู

---

ุงฺฏู ุจุฎูุงุ ุจุนุฏุด ูโุชููู:

* ุฏููุงู ฺฉ Controller ุฑู ุฎุทโุจูโุฎุท ุจุฑุฑุณ ฺฉูู
* ุง ุชูุงูุช Controller ู Operator ุฑู ุจฺฏู
* ุง ุจุง ฺฉ ุณูุงุฑู ูุงูุน Crash ฺฉุงูู ุชูุถุญ ุจุฏู

ุจฺฏู ฺฉุฏููุด ๐


