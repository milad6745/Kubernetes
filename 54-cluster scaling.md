در کوبرنتیز، **Cluster Scaling** یعنی تغییر اندازه‌ی کلاستر با اضافه یا کم کردن **Node**ها (سرورها یا ماشین‌های فیزیکی/مجازی که Pod ها روی آنها اجرا می‌شوند). این کار برای مدیریت بار، عملکرد و هزینه انجام می‌شود. اجازه بده ساده توضیح بدم:

---

### 1️⃣ Types of Scaling

دو نوع اصلی داریم:

1. **Scaling Up / Down (Vertical Scaling)**

   * منابع **یک Node** را افزایش یا کاهش می‌دهیم (مثلاً RAM یا CPU بیشتر به یک سرور بدهیم).
   * مزیت: ساده است و نیاز به تغییر Podها ندارد.
   * محدودیت: نهایت ظرفیت یک Node محدود است.

2. **Scaling Out / In (Horizontal Scaling)**

   * **Node جدید به کلاستر اضافه می‌کنیم** → Scale Out
   * **Node حذف می‌کنیم** → Scale In
   * مزیت: می‌توان بار را بین Nodeهای بیشتر تقسیم کرد و کلاستر قابل گسترش است.
   * در کوبرنتیز معمولاً **Horizontal Scaling** استفاده می‌شود.

---

### 2️⃣ روش‌های Scaling در Kubernetes

#### a) **Manual Scaling**

* مدیر سیستم خودش Nodeها را اضافه یا حذف می‌کند.
* مثال با **kubeadm**:

  * اضافه کردن Node: Node جدید را آماده و با دستور `kubeadm join` به کلاستر متصل می‌کنیم.
  * حذف Node: با دستور `kubectl drain` Node را خالی کرده و سپس `kubectl delete node <node-name>`.

#### b) **Auto Scaling**

* Kubernetes می‌تواند به صورت خودکار Node اضافه یا حذف کند، معمولاً با ابزارهایی مثل:

  1. **Cluster Autoscaler**

     * وقتی Podها نیاز به منابع بیشتری دارند → Node جدید اضافه می‌شود.
     * وقتی Node بلااستفاده است → حذف می‌شود.
  2. **Node Pools** (در سرویس‌های ابری مثل GKE، EKS، AKS)

     * Nodeها را در گروه‌های با مشخصات مشابه می‌گذارند و Autoscaler روی آن‌ها فعال می‌شود.

---

### 3️⃣ روند کار وقتی Node اضافه/حذف می‌شود

1. Node جدید آماده و به کلاستر اضافه می‌شود.
2. Scheduler کوبرنتیز Podها را روی Node جدید می‌فرستد اگر نیاز باشد.
3. Node حذف می‌شود → Podهای روی آن به Nodeهای دیگر منتقل می‌شوند (با توجه به ReplicaSet یا Deployment).

---

### 4️⃣ نکات مهم

* Node Scaling با **Pod Scaling** متفاوت است:

  * **Pod Scaling** = تعداد Podها را زیاد یا کم می‌کنیم (با HPA).
  * **Node Scaling** = تعداد سرورهای واقعی را زیاد یا کم می‌کنیم.
* Autoscaling فقط زمانی مؤثر است که Podها محدودیت منابع (CPU/Memory) داشته باشند.
* قبل از حذف Node، حتماً باید Podها را **drain** کنیم تا از دست رفتن سرویس جلوگیری شود.

---

اگر بخواهی، می‌توانم یک **نمودار ساده** بکشم که نشان بده **Node و Pod Scaling چطور با هم کار می‌کنند** تا بهتر متوجه شوی.

می‌خوای این کارو انجام بدم؟
