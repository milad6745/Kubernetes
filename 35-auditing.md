**Auditing** ุฏุฑ Kubernetes ุจู ูุฑุขูุฏ ุฑุฏุงุจ ู ุซุจุช ุชูุงู ุฑูุฏุงุฏูุง ูุฑุชุจุท ุจุง API Server ุงุดุงุฑู ุฏุงุฑุฏ. ุงู ูฺฺฏ ุจู ุดูุง ุงูฺฉุงู ูโุฏูุฏ ูุนุงูุชโูุง ฺฉุงุฑุจุฑุงูุ ุณุฑูุณโูุง ู ุฏฺฏุฑ ุงุฌุฒุง ฺฉูุณุชุฑ ุฑุง ุซุจุช ู ูุงูุชูุฑ ฺฉูุฏ. Auditing ุจุฑุง ุงูุฏุงู ุฒุฑ ููุฏ ุงุณุช:

1. **ูุงูุชูุฑูฺฏ ุงููุช:** ุดูุงุณุง ูุนุงูุชโูุง ุบุฑูุฌุงุฒ.
2. **ุฏุจุงฺฏ ู ุนุจโุงุจ:** ุฑุฏุงุจ ูุดฺฉูุงุช ุฏุฑ ฺฉูุณุชุฑ.
3. **ุฑุนุงุช ููุฑุฑุงุช:** ุฐุฎุฑู ุชุงุฑุฎฺูโุง ุงุฒ ูุนุงูุชโูุง ุจุฑุง ุงูุทุจุงู ุจุง ุงุณุชุงูุฏุงุฑุฏูุง ูุงููู.

---

### ุงุฌุฒุง ุงุตู Auditing:

#### 1. **Audit Policy (ุณุงุณุชโูุง ูุธุงุฑุช):**
ูุงู ุณุงุณุช ุชุนู ูโฺฉูุฏ ฺฉู ฺฉุฏุงู ุฑูุฏุงุฏูุง ุซุจุช ุดููุฏ ู ุจู ฺู ุดฺฉู ุฐุฎุฑู ุดููุฏ.
ุณุงุณุชโูุง ุดุงูู ฺูุงุฑ ุณุทุญ ูุณุชูุฏ:
**None:**


 ุฑูุฏุงุฏ ุซุจุช ููโุดูุฏ.
**Metadata:**


 ููุท ุงุทูุงุนุงุช ูุชุงุฏุชุง (ูุงููุฏ ุฒูุงูุ ฺฉุงุฑุจุฑ) ุซุจุช ูโุดูุฏ.
**Request:**


 ุทูุงุนุงุช ูุชุงุฏุชุง ููุฑุงู ุจุง ุฏุงุฏูโูุง ุฏุฑุฎูุงุณุช ุซุจุช ูโุดูุฏ
  
**RequestResponse:**


     
ุงุทูุงุนุงุช ูุชุงุฏุชุงุ ุฏุงุฏูโูุง ุฏุฑุฎูุงุณุชุ ู ูพุงุณุฎ ุซุจุช ูโุดูุฏ.


   **ูุซุงู ฺฉ ูุงู ุณุงุณุช Audit:**
   ```yaml
   apiVersion: audit.k8s.io/v1
   kind: Policy
   rules:
   - level: Metadata
     users: ["system:authenticated"]
     verbs: ["get", "list", "watch"]
     resources:
     - group: ""
       resources: ["pods", "services"]
   - level: RequestResponse
     verbs: ["create", "delete"]
   ```

#### 2. **Audit Log (ูุงฺฏโูุง):**
   - ุฎุฑูุฌ ุฑูุฏุงุฏูุง ุฏุฑ ูุงูโูุง ูุงฺฏ ุฐุฎุฑู ูโุดูุฏ.
   - ูุณุฑ ูพุดโูุฑุถ ูุงฺฏโูุง ูุนูููุงู ุฏุฑ API Server ุชูุธู ูโุดูุฏ.

---

### ูพฺฉุฑุจูุฏ Auditing:

1. **ุงุฌุงุฏ ฺฉ ูุงู ุณุงุณุช Audit:**
   - ูุงู YAML ุจุงูุง ุฑุง ุฐุฎุฑู ฺฉูุฏุ ูุซูุงู ุจุง ูุงู `audit-policy.yaml`.

2. **ุชูุธูุงุช API Server:**
   - ูุงู ุณุงุณุช ุฑุง ุจู API Server ูุนุฑู ฺฉูุฏ.
   - ุฏุฑ ูุงู ุชูุธูุงุช API Serverุ ูพุงุฑุงูุชุฑูุง ุฒุฑ ุฑุง ุงุถุงูู ฺฉูุฏ:
     ```bash
     --audit-policy-file=/path/to/audit-policy.yaml
     --audit-log-path=/var/log/kubernetes/audit.log
     --audit-log-maxage=30
     --audit-log-maxbackup=10
     --audit-log-maxsize=100
     ```

   - ุณูพุณ API Server ุฑุง ุฑโุงุณุชุงุฑุช ฺฉูุฏ.

3. **ุจุฑุฑุณ ูุงฺฏโูุง:**
   - ูุงฺฏโูุง ุฑุง ูโุชูุงูุฏ ุจุง ุงุณุชูุงุฏู ุงุฒ ุงุจุฒุงุฑูุง ูุงูุชูุฑูฺฏ ุง ุจู ุตูุฑุช ุฏุณุช ุจุฑุฑุณ ฺฉูุฏ:
     ```bash
     tail -f /var/log/kubernetes/audit.log
     ```

---

### ุณุงุฎุชุงุฑ ฺฉ ุฑูุฏุงุฏ ุฏุฑ ูุงฺฏ Audit:

ูุฑ ุฑูุฏุงุฏ ุฏุฑ ูุงูุจ JSON ุฐุฎุฑู ูโุดูุฏ. ฺฉ ููููู:
```json
{
  "kind": "Event",
  "apiVersion": "audit.k8s.io/v1",
  "level": "Metadata",
  "timestamp": "2024-12-30T12:34:56Z",
  "user": {
    "username": "system:admin",
    "groups": ["system:authenticated"]
  },
  "verb": "create",
  "objectRef": {
    "resource": "pods",
    "namespace": "default",
    "name": "example-pod"
  },
  "responseStatus": {
    "metadata": {},
    "code": 201
  }
}
```

- **user:** ฺฉุงุฑุจุฑ ฺฉู ุฏุฑุฎูุงุณุช ุฑุง ุงุฑุณุงู ฺฉุฑุฏู.
- **verb:** ุนูู ฺฉู ุงูุฌุงู ุดุฏู (ูุซู `create` ุง `delete`).
- **objectRef:** ููุจุน ฺฉู ุชุญุช ุชุฃุซุฑ ูุฑุงุฑ ฺฏุฑูุชู.
- **responseStatus:** ูุชุฌู ุฏุฑุฎูุงุณุช.

---

### ุงุจุฒุงุฑูุง ูพุดุฑูุชู ุจุฑุง Auditing:

1. **ELK Stack:** ุจุฑุง ุชุฌุฒู ู ุชุญูู ูุงฺฏโูุง.
2. **Splunk:** ุจุฑุง ุฐุฎุฑู ู ุฌุณุชุฌู ูุงฺฏโูุง.
3. **Fluentd:** ุจุฑุง ุงุฑุณุงู ูุงฺฏโูุง ุจู ุณุณุชูโูุง ุฎุงุฑุฌ.

ุงฺฏุฑ ุณุคุงู ุฏุฑุจุงุฑู ูพุงุฏูโุณุงุฒ ุง ุชูุธูุงุช ุจุดุชุฑ ุฏุงุฑุฏุ ุฎูุดุญุงู ูโุดูู ฺฉูฺฉ ฺฉูู! ๐
