

ุฏุฑ Kubernetesุ **ุณุงุณุชโูุง ุฑุณุชุงุฑุช (Restart Policies)** ูุดุฎุต ูโฺฉููุฏ ฺฉู ฺู ุฒูุงู ฺฉ ูพุงุฏ (Pod) ุง ฺฉุงูุชูุฑูุง ุฏุงุฎู ุขู ุจุงุฏ ุฑุณุชุงุฑุช ุดููุฏ. ุงู ุณุงุณุชโูุง ูุนูููุงู ุฏุฑ **ูุงููุณุช ูพุงุฏ** (Pod Manifest) ุง ููุงุจุน ูุดุงุจู ูุงููุฏ Job ุง CronJob ุชุนุฑู ูโุดููุฏ. ุณู ููุน ุณุงุณุช ุฑุณุชุงุฑุช ูุฌูุฏ ุฏุงุฑุฏ:

---

### 1. **Always**
- **ุฑูุชุงุฑ:** ููุดู ฺฉุงูุชูุฑูุง ูพุงุฏ ุฑุง ุฏุฑ ุตูุฑุช ุชููู (Crash ุง Exit) ุฑุณุชุงุฑุช ูโฺฉูุฏ.
- **ููุงุณุจ ุจุฑุง:** ูพุงุฏูุง ฺฉู ุณุฑูุณโูุง ุทููุงูโูุฏุช ุงุฑุงุฆู ูโุฏููุฏุ ูุงููุฏ ุณุฑูุณโูุง ูุจ.
- **ูพุดโูุฑุถ:** ุงฺฏุฑ ุณุงุณุช ุฑุณุชุงุฑุช ูุดุฎุต ูุดูุฏุ Kubernetes ุจู ุตูุฑุช ูพุดโูุฑุถ ุงุฒ ุงู ุณุงุณุช ุงุณุชูุงุฏู ูโฺฉูุฏ.
- **ุงุณุชูุงุฏู ุฏุฑ ููุงุจุน:** ูุนูููุงู ุจุฑุง **Deployment** ุง **ReplicaSet**.

---

### 2. **OnFailure**
- **ุฑูุชุงุฑ:** ุชููุง ุฏุฑ ุตูุฑุช ฺฉุงูุชูุฑ ุฑุณุชุงุฑุช ูโุดูุฏ ฺฉู ุจู ุฏูู ฺฉ ุฎุทุง ุบุฑ ุตูุฑ (non-zero exit code) ูุชููู ุดุฏู ุจุงุดุฏ.
- **ููุงุณุจ ุจุฑุง:** ูพุฑุฏุงุฒุดโูุง ฺฉูุชุงูโูุฏุช ฺฉู ุจุงุฏ ุฏุฑ ุตูุฑุช ุจุฑูุฒ ุฎุทุง ุฏูุจุงุฑู ุงุฌุฑุง ุดููุฏุ ูุงููุฏ ูพุฑุฏุงุฒุด ุฏุงุฏูโูุง.
- **ุงุณุชูุงุฏู ุฏุฑ ููุงุจุน:** ูุนูููุงู ุจุฑุง **Job** ุง **CronJob**.

---

### 3. **Never**
- **ุฑูุชุงุฑ:** ูฺโฺฏุงู ฺฉุงูุชูุฑ ุฑุง ุฑุณุชุงุฑุช ููโฺฉูุฏุ ุญุช ุงฺฏุฑ ุจู ุฏูู ุฎุทุง ูุชููู ุดูุฏ.
- **ููุงุณุจ ุจุฑุง:** ููุงูุน ฺฉู ูุงุฒ ุจู ูุดุงูุฏู ู ุจุฑุฑุณ ุฎุฑูุฌ ุฎุทุง ุฏุงุฑุฏ ุง ุงุฌุฑุง ฺฉโุจุงุฑูโุง ูุฏูุธุฑ ุงุณุช.
- **ุงุณุชูุงุฏู ุฏุฑ ููุงุจุน:** ุจู ูุฏุฑุช ุงุณุชูุงุฏู ูโุดูุฏุ ุงูุง ุฏุฑ ุจุฑุฎ ุชุณุชโูุง ุง ุงุณฺฉุฑูพุชโูุง ุฎุงุต ููฺฉู ุงุณุช ููุฏ ุจุงุดุฏ.

---

### ฺฉุฌุง ุชูุธู ูโุดูุฏุ
ุงู ุณุงุณุชโูุง ุฏุฑ ูุดุฎุตุงุช ฺฉ ูพุงุฏ ุง ููุงุจุน ูุดุงุจู ุฏุฑ ููุฏ `restartPolicy` ุชูุธู ูโุดููุฏ. ูุซูุงู:

```yaml
apiVersion: v1
kind: Pod
metadata:
  name: example-pod
spec:
  containers:
  - name: example-container
    image: nginx
  restartPolicy: OnFailure
```

---



ุณุคุงู ุฎู ุฎูุจ ูพุฑุณุฏ! ๐  
ุชูุงูุช ุจู `restart: Always` ู `restart: OnFailure` (ู ุจูู ุญุงูุงุช) ุชู Kubernetes ุฎู ูููู ูุฎุตูุตุงู ููุช ุฏุงุฑ Pod ุง Job ุชุนุฑู ูโฺฉู.

---

## ๐ ูุฑู ุจู `restartPolicy` ูุง ุฏุฑ Kubernetes

ุฏุฑ YAML ูุฑุจูุท ุจู ฺฉ **Pod** ุง **Job**ุ ูโุชูู ูุดุฎุต ฺฉู ฺฉู ุฑูุชุงุฑ ูพุงุฏ ุฏุฑ ุตูุฑุช **ุฎุฑูุฌ (exit)** ฺฉุงูุชูุฑ ฺุทูุฑ ุจุงุดู.

### ๐น ุญุงูุชโูุง:

| ููุฏุงุฑ | ุชูุถุญ |
|-------|--------|
| `Always` | ููุดู ฺฉุงูุชูุฑ ุฑโุงุณุชุงุฑุช ูโุดูุ ฺู ุจุง ููููุช (`exit 0`) ุฎุงุฑุฌ ุจุดู ฺู ุจุง ุฎุทุง (`exit 1`) โ ูพุดโูุฑุถ ุฏุฑ **Deployment**ูุง |
| `OnFailure` | ููุท ููุช ุฑโุงุณุชุงุฑุช ูโุดู ฺฉู ฺฉุงูุชูุฑ ุจุง **ุฎุทุง ุฎุงุฑุฌ ุดุฏู ุจุงุดู** (`exit code != 0`) |
| `Never` | ูฺ ููุช ุฑโุงุณุชุงุฑุช ููโุดูุ ุญุช ุงฺฏุฑ ุจุง ุฎุทุง ุฎุงุฑุฌ ุจุดู |

---

### ๐ ูุซุงู ฺฉุงุฑุจุฑุฏ:

#### โ `restartPolicy: Always`
ุจุฑุง ุณุฑูุณโูุง ูุซู ูุจโุณุฑูุฑุ Nginxุ APIุ ฺฉู ุจุงุฏ ููุดู ุจุงูุง ุจุงุดู.

```yaml
apiVersion: v1
kind: Pod
spec:
  containers:
  - name: app
    image: nginx
  restartPolicy: Always
```

#### โ `restartPolicy: OnFailure`
ููุงุณุจ ุจุฑุง **Job**ูุง ฺฉู ููุท ฺฉโุจุงุฑ ุจุงุฏ ุงุฌุฑุง ุจุดู (ูุซูุงู backup ุง ูพุฑุฏุงุฒุด ุฏุชุง).

```yaml
apiVersion: batch/v1
kind: Job
spec:
  template:
    spec:
      containers:
      - name: job
        image: busybox
        command: ["sh", "-c", "exit 1"]
      restartPolicy: OnFailure
```

---

### ๐ง ูฺฉุชู ููู:

- ุชู **Deployment**ุ ููุท `restartPolicy: Always` ูุฌุงุฒู.
- ุชู **Job**ูุง ูุนูููุงู `OnFailure` ุง `Never` ุงุณุชูุงุฏู ูโุดู.

---

ุงฺฏู ุจุฎูุง ุชูุงูุช ุงูุง ุฑู ุชู ุนูู ุจุจูุ ูโุชููู ุจุฑุงุช ู ูุซุงู ูุงูุน ุจููุณู ฺฉู ุจุง `kubectl` ุชุณุชุด ฺฉู. ุจฺฏ ุจูุฑุณุชูุ
